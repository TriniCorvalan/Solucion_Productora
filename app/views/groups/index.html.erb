<p id="notice"><%= notice %></p>

<h1>Groups</h1>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Crew</th>
      <th>Crew names</th>
      <th>Concerts</th>
      <th>Type Of Group</th>
      <th>Debut Date</th>
      <th>Concerts This Month</th>
      <th>Last Concert</th>
      <th>Most Attendance</th>
      <th>Longest Concert</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @groups.each do |group| %>
      <tr>
        <td><%= group.name %></td>
        <td><%= group.crew %></td>
        <td>
          <ol>
            <% group.crews.each do |member| %>
              <li><%= member.name %></li>
            <% end %>
          </ol>
        </td>
        <td>
          <ul>
            <% group.concerts.each do |concert| %>
              <li><%= concert.place %>, <%= concert.attendance %> Asistentes</li>
            <% end %>
          </ul>
        </td>
        <td><%= group.type_group %></td>
        <td><%= group.debut_date %></td>
        <td><%= group.concerts_this_month %></td>
        <% if group.concerts.present? %>
          <td><%= group.last_concert.strftime("%Y-%B-%A") %></td>
          <%else  %>
          <td> Tu grupo a√∫n no tiene conciertos :<</td>
        <% end %>
        
        <td><%= group.most_people %></td>
        <td><%= group.longest_concert %> hours</td>
        <td><%= link_to 'Show', group %></td>
        <td><%= link_to 'Edit', edit_group_path(group) %></td>
        <td><%= link_to 'Destroy', group, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= link_to 'New Group', new_group_path %>


